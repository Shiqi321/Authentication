<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.authentication.Mapper.UserLoginInfoMapper" >
    <resultMap id="ResultMap" type="com.authentication.Model.UserLoginInfo" >
        <id column="userId" property="userId" jdbcType="VARCHAR" />
        <result column="username" property="username" jdbcType="VARCHAR" />
        <result column="password" property="password" jdbcType="VARCHAR" />
        <result column="signDateTime" property="signDateTime" jdbcType="BIGINT"/>
    </resultMap>


    <select id="getUserId" resultType="java.lang.String">
        SELECT userId
        FROM UserLoginInfo
        where username = #{username}
    </select>

    <select id="getUser" resultMap="ResultMap">
        SELECT userId, username, password, signDateTime, isVerified
        FROM UserLoginInfo
        where userId = #{userId}
    </select>

    <insert id = "insertUser">
        insert
        into UserLoginInfo (userId, username, password, signDateTime, isVerified)
        values (#{userId}, #{username}, #{password}, #{signDateTime}, #{isVerified})
    </insert>

    <select id="getIsVerified" resultType="java.lang.Integer">
        SELECT isVerified
        FROM UserLoginInfo
        where username = #{username}
    </select>

    <update id = "setIsVerified">
        update
        UserLoginInfo
        set isVerified = #{isVerified}
        where username = #{username}
    </update>

    <update id = "updateUserLoginInfo">
        update
        UserLoginInfo
        set password = #{password},signDateTime = #{signDateTime}
        where userId = #{userId}
    </update>

</mapper>